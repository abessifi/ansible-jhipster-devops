- name: Create necessary directories
  file:
    path: "{{ item }}"
    state: directory
  with_items:
    - "/data/docker/gitlab/postgresql"
    - "/data/docker/gitlab/gitlab"
    - "/data/docker/gitlab/redis"

- name: Install Docker-compose
  pip: name=docker-compose version=1.3.3

- name: Deploy GitLab container using docker-compose
  shell: docker-compose up &

