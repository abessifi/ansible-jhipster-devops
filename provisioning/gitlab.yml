- name: Deploy a GitLab container
  docker:
    docker_api_version: 1.18
    name: Gitlab
    image: sameersbn/gitlab:7.12.2-2
    state: present

- name: Create necessary directories
  file:
    path: "{{ item }}"
    state: directory
  with_items:
    - "/vagrant/docker/gitlab/postgresql"
    - "/vagrant/docker/gitlab/gitlab"
    - "/vagrant/docker/gitlab/redis"

- name: Install Docker-compose
  shell: pip install -U docker-compose

- name: get information from docker-compose.yml
  shell: wget https://gist.githubusercontent.com/nasry/1c7197ee4aa1535be9b3/raw/de86d9e3df652b5ccfa6c2dd166df51ab963ab27/docker-compose.yml
- name: get started using docker-compose 
  shell: docker-compose up &

